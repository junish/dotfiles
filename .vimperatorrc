" prefs
" ================================================
" caretのサイズ
"set! ui.caretWidth=10

" undo保持数
set! browser.sessionstore.max_tabs_undo=30

" ページのアクセスキーを無効化
set! ui.key.generalAccessKey=0

" <Leader>の設定
let mapleader=","

" options
" ================================================
" ex mode でインクリメント補完
"set wildoptions=sort
"set wildoptions=auto

" :[tab]open の補完対象と順番
set complete=Slb

" ブラウザタイトルの変更
set titlestring="Mozilla Firefox"

"ツールバーを表示
set toolbars=none

" 常にタブを表示
"set showtabline=2

" リンクのURIをステータスラインに表示
set showstatuslinks=1

" 詳細表示を5行に(最大値=9)
set verbose=5

" Beep設定
hi Bell opacity: .5;

" mappings
" ================================================
"移動量を増やす
nnoremap j 4j
nnoremap k 4k
nnoremap <C-h> 4h
nnoremap <C-l> 4l

"PageDown,PageUp
nnoremap J <PageDown>
nnoremap K <PageUp>

"戻る/進む
noremap h <A-Left>
noremap l <A-Right>

"タブ移動
nnoremap <silent> H :tabprevious<CR>
nnoremap <silent> L :tabnext<CR>

",sで設定ファイル再読込
nnoremap <Leader>. :so ~/.vimperatorrc<CR>

"qmarks
nnoremap qm <esc>:qmark<Space>
nnoremap qa <esc>:qmarks<cr>

" OSのキーバインドを再現 
noremap <C-a> <C-v><C-a>
noremap <C-c> <C-v><C-c>

inoremap <C-a> <C-v><C-a>
inoremap <C-c> <C-v><C-c>
inoremap <C-v> <C-v><C-v>
inoremap <C-x> <C-v><C-x>
inoremap <C-z> <C-v><C-z>
inoremap <C-Space> <C-v><C-Space>

cnoremap <C-a> <C-v><C-a>
cnoremap <C-c> <C-v><C-c>
cnoremap <C-v> <C-v><C-v>
cnoremap <C-x> <C-v><C-x>
cnoremap <C-z> <C-v><C-z>

" undo一覧から開く
nnoremap u :undo<CR>
nnoremap U :undo<Space>

" plugins
" ================================================
" ime_controller.js
let g:ex_ime_mode = "inactive"
let g:textarea_ime_mode = "inactive"

" char_hints_mod2.js
let g:hintsio="iO"
let g:hintchars="JKLASDFUIOPQWERGHTNMCV"

" migemo_hint.js
set hintmatching=custom

" browser_object.js
nnoremap x dd

" multi_requester.js
javascript <<EOF
/* DEFAULT SITES */
liberator.globalVariables.multi_requester_default_sites = "alc,goo,wikipedia-jp"

/* SITE_INFO */
liberator.globalVariables.multi_requester_siteinfo = [
    {
        name:           'wikipedia-jp',
        description:    'wikipedia(japanese)',
        url:            'http://ja.wikipedia.org/wiki/%s',
        xpath:          'id("bodyContent")',
    },
];
EOF

"コマンドモードでマルチリクエスト
nnoremap <Leader>, :mr 
nnoremap <Leader>a :mr alc 
nnoremap <Leader>s :mr wikipedia-jp 
nnoremap <Leader>d :mr googletrans-en 
nnoremap <Leader>f :mr googletrans-ja 
nnoremap <Leader>q :mr google-codesearch
"nnoremap <Leader>w :mr 
"nnoremap <Leader>e :mr 
"nnoremap <Leader>r :mr 

"選択している単語をALCで検索
vnoremap <silent> <C-t> y<Esc><Esc>:mr alc <C-v><C-v><CR>

" toggler.js
"各種バー表示をトグル
js <<EOM
liberator.globalVariables.toggler = {
  toolbars:  ["set toolbars=none", "set toolbars=none,tabs,bookmarks,addons", "set toolbars=all"],
};
EOM
:nnoremap <silent> <Leader>m :toggle toolbars<cr>

" feedSomeKeys_2.js
autocmd LocationChange .* :fmapc
" Gmail設定
"autocmd LocationChange mail\.google\.com/mail :fmap! -depth 4 c / j k n p o u e x s r a # [ ] z ? gi gs gt gd ga gc
" Google Reader設定 
"参考:http://fifnel.com/2009/10/06/2947/
"autocmd LocationChange www\.google\.(com|co\.jp)/reader :fmap -vkey m A v r X O gh ga gs gt gu / ? <C-j>,<Pagedown> <C-k>,<Pageup>
"autocmd LocationChange www\.google\.(com|co\.jp)/reader :fmap -vkey c,1 C,2 j,n k,p n,j p,l s,NO S,s a,PO o,O J,N K,P q,t w,t p,s b u

"RSS/ATOM登録フィードをステータスバーに表示
"http://d.hatena.ne.jp/teramako/20071205/p1
":javascript <<EOF
"(function(){
"var feedPanel = document.createElement('statusbarpanel');
"var feedButton = document.getElementById('feed-button');
"feedPanel.setAttribute('id','feed-panel-clone');
"feedPanel.appendChild(feedButton.cloneNode(true));
"feedButton.parentNode.removeChild(feedButton);
"document.getElementById('status-bar').insertBefore(feedPanel,document.getElementById('security-button'));
"})();
"EOF

"サイト内検索 (:ss)
"参考: http://vimperator.g.hatena.ne.jp/snaka72/20090102/1230901273
"javascript <<EOM
"commands.addUserCommand(
"  ['sitesearch','ss'],'Search in this site',
"  function(word) {
"    liberator.open("http://www.google.co.jp/search?hl=ja&q="+encodeURIComponent(word)+"+site%3A"+window.content.location.hostname);
"  }
");
"EOM

" vim: set ft=vimperator:
