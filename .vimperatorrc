" TODO: Reading http://d.hatena.ne.jp/blooo/20100120/1263963525

" prefs
" ================================================
" caretのサイズ
"set! ui.caretWidth=10

" undo保持数
set! browser.sessionstore.max_tabs_undo=30

" ページのアクセスキーを無効化
set! ui.key.generalAccessKey=0

" <Leader>の設定
let mapleader=","

" options
" ================================================
" ex mode でインクリメント補完
set wildoptions=sort
"set wildoptions=auto

" /,? 検索結果をハイライト
set hlsearch

" :[tab]open の補完対象と順番
set complete=Slb

" ブラウザタイトルの変更
set titlestring="Mozilla Firefox"

"右側にスクロールバーを表示
"下側にスクロールバーを表示
"ブックマークツールバーを表示
set guioptions=br

" 常にタブを表示
set showtabline=2

" ページロード時にテキストボックスにフォーカスするのを防ぐ
set focuscontent

" リンクのURIをステータスラインに表示
set showstatuslinks=1

" 新規ウィンドウの処理
set popups=1

" ページロード時にテキストボックスにフォーカスするのを防ぐ
set focuscontent

" 詳細表示を5行に(最大値=9)
set verbose=5

" Beep設定
set visualbell
hi Bell opacity: .5;

" mappings
" ================================================
"移動量を増やす
nnoremap j 4j
nnoremap k 4k

"J/KにPageDown,PageUpを割り当て(LDRizeが効いている場合でも指のポジションを動かさずに済む
nnoremap J <PageDown>
nnoremap K <PageUp>

"h/lで戻る/進む
noremap h <A-Left>
noremap l <A-Right>

"タブ移動
nnoremap <silent> H :tabprevious<CR>
nnoremap <silent> L :tabnext<CR>

"移動
nnoremap <C-H> 4h
nnoremap <C-L> 4l

",sで設定ファイル再読込
nnoremap <Leader>. :so ~/.vimperatorrc<CR>

"qmarks
nnoremap qm <esc>:qmark<Space>
nnoremap qa <esc>:qmarks<cr>

" OSのキーバインドを再現 
noremap <C-a> <C-v><C-a>
noremap <C-c> <C-v><C-c>

inoremap <C-a> <C-v><C-a>
inoremap <C-c> <C-v><C-c>
inoremap <C-v> <C-v><C-v>
inoremap <C-x> <C-v><C-x>
inoremap <C-z> <C-v><C-z>
inoremap <C-Space> <C-v><C-Space>

cnoremap <C-a> <C-v><C-a>
cnoremap <C-c> <C-v><C-c>
cnoremap <C-v> <C-v><C-v>
cnoremap <C-x> <C-v><C-x>
cnoremap <C-z> <C-v><C-z>

" plugins
" ================================================
" maine_coon.js
"set mainecoon=am

" ime_controller.js
let g:ex_ime_mode = "inactive"
let g:textarea_ime_mode = "inactive"

" char_hints_mod2.js
let g:hintsio="iO"
let g:hintchars="JKLASDFUIOPQWERGHTNMCV"

" migemo_hint.js
set hintmatching=custom

" browser_object.js
nnoremap x dd

" multi_requester.js
javascript <<EOF
/* DEFAULT SITES */
liberator.globalVariables.multi_requester_default_sites = "alc,goo,wikipedia-jp"

/* SITE_INFO */
liberator.globalVariables.multi_requester_siteinfo = [
    {
        name:           'wikipedia-jp',
        description:    'wikipedia(japanese)',
        url:            'http://ja.wikipedia.org/wiki/%s',
        xpath:          'id("bodyContent")',
    },
];
EOF

"コマンドモードでマルチリクエスト
nnoremap <Leader>, :mr 
nnoremap <Leader>a :mr alc 
nnoremap <Leader>s :mr wikipedia-jp 
nnoremap <Leader>d :mr googletrans-en 
nnoremap <Leader>f :mr googletrans-ja 
nnoremap <Leader>q :mr google-codesearch
"nnoremap <Leader>w :mr 
"nnoremap <Leader>e :mr 
"nnoremap <Leader>r :mr 

"選択している単語をALCで検索
vnoremap <silent> <C-t> y<Esc><Esc>:mr alc <C-v><C-v><CR>

" toggler.js
"各種バー表示をトグル
js <<EOM
liberator.globalVariables.toggler = {
  guioptions:  ["set guioptions=br", "set guioptions=Bbr", "set guioptions=BmTbr"],
  maincoon: ["set mainecoon=amc",  "set mainecoon=am", "set mainecoon=m"]
};
EOM
nnoremap <silent> <Leader>m :toggle guioptions<cr>
nnoremap <silent> <Leader>M :toggle maincoon<cr>


"  feedSomeKeys_2.js
autocmd LocationChange .* :fmapc
" Gmail設定
"autocmd LocationChange mail\.google\.com/mail :fmap! -depth 4 c / j k n p o u e x s r a # [ ] z ? gi gs gt gd ga gc
" Google Reader設定 
"参考:http://fifnel.com/2009/10/06/2947/
"autocmd LocationChange www\.google\.(com|co\.jp)/reader :fmap -vkey m A v r X O gh ga gs gt gu / ? <C-j>,<Pagedown> <C-k>,<Pageup>
"autocmd LocationChange www\.google\.(com|co\.jp)/reader :fmap -vkey c,1 C,2 j,n k,p n,j p,l s,NO S,s a,PO o,O J,N K,P q,t w,t p,s b u

"Show feed-button to statusbar
"http://d.hatena.ne.jp/teramako/20071205/p1
:javascript <<EOF
(function(){
var feedPanel = document.createElement('statusbarpanel');
var feedButton = document.getElementById('feed-button');
feedPanel.setAttribute('id','feed-panel-clone');
feedPanel.appendChild(feedButton.cloneNode(true));
feedButton.parentNode.removeChild(feedButton);
document.getElementById('status-bar').insertBefore(feedPanel,document.getElementById('security-button'));
})();
EOF

"サイト内検索 (:ss)
"参考: http://vimperator.g.hatena.ne.jp/snaka72/20090102/1230901273
javascript <<EOM
commands.addUserCommand(
  ['sitesearch','ss'],'Search in this site',
  function(word) {
    liberator.open("http://www.google.co.jp/search?hl=ja&q="+encodeURIComponent(word)+"+site%3A"+window.content.location.hostname);
  }
);
EOM

" カレンダーを表示
command cal :js liberator.echo(<datepicker type="grid" xmlns={XUL}/>)

" vim: set ft=vimperator:
